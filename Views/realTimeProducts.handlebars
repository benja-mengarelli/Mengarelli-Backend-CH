{{> manejoProductos}}

<script src="/socket.io/socket.io.js"></script>
<script>
console.log("âœ… realTimeProducts socket iniciado");
const socket = io();

socket.on('productUpdate', (data) => {
    console.log("ðŸ“¡ ActualizaciÃ³n de producto recibida:", data);
    const list = document.querySelector('.VisualManejoProductos');

    if (data.action === 'create') {
        const li = document.createElement('li');
        li.id = `product-${data.product._id}`;
        li.innerHTML = `<img src="${data.product.imagenUrl}" alt="${data.product.nombre}"><strong>${data.product.nombre}</strong> - $${data.product.precio}<br>`;
        list.appendChild(li);
        console.log("âœ… Producto creado en tiempo real");
    } else if (data.action === 'update') {
        const li = document.getElementById(`product-${data.product._id}`);
        if (li) {
            li.innerHTML = `<img src="${data.product.imagenUrl}" alt="${data.product.nombre}"><strong>${data.product.nombre}</strong> - $${data.product.precio}<br>`;
            console.log("âœ… Producto actualizado en tiempo real");
        }
    } else if (data.action === 'delete') {
        const li = document.getElementById(`product-${data.product._id}`);
        if (li) {
            li.remove();
            console.log("âœ… Producto eliminado en tiempo real");
        }
    }
});
</script>